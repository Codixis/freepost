{% extends 'AppBundle:Default:User/template.html.twig' %}

{% block title %}
    Preferences: {{ user.username }}
{% endblock %}

{% block javascript %}
    {{ parent() }}
    
    {% javascripts
        '@AppBundle/Resources/public/js/User/preferences.js'
    %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

{% block content %}
    
    <div class="preferences">
        
        <div class="section">
            <div class="title">
                Display name
            </div>
            <div class="options">
                <input type="text" id="displayName" name="displayName" value="{{ user.username }}" />
            </div>
        </div>
        
        <div class="section">
            <div class="title">
                Picture
            </div>
            <div class="options">
                <form action  = "{{ path('freepost_user_update_picture') }}"
                      enctype = "multipart/form-data"
                      id      = "pictureForm"
                      method  = "post"
                      target  = "iframenull">
                    <input type="file" id="pictureFile" name="pictureFile" />
                </form>
                
                {% image '@AppBundle/Resources/public/images/loading-bar.gif' %}
                    <img id="pictureFileLoading" src="{{ asset_url }}" alt="" />
                {% endimage %}
            </div>
        </div>
        
    </div>
    
    {# This iframe is used to redirect <form> ajax request #}
    <iframe id="iframenull" name="iframenull" class="hidden"></iframe>
    
{% endblock %}




